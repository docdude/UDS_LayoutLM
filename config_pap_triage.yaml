# PAP/Cervical Cancer Triage Model Configuration
# Focused on: Document type (Pap/HPV), collection dates, and Bethesda results
# Following same framework as CRC and MMG models

model:
  base_model: "microsoft/layoutlmv3-base"
  max_length: 512

training:
  output_dir: "./models/pap_triage_v1"
  epochs: 30
  batch_size: 8  # Adjust based on GPU VRAM
  gradient_accumulation_steps: 1
  learning_rate: 0.00003  # Conservative LR for finer convergence
  weight_decay: 0.01
  warmup_ratio: 0.1
  fp16: true  # Enable FP16 on GPU for speedup
  lr_scheduler_type: "cosine"  # Cosine annealing
  eval_strategy: "epoch"
  save_strategy: "epoch"
  logging_steps: 10
  device: "cpu"  # Use "cuda" for GPU, "cpu" for CPU
  dataloader_num_workers: 4  # Parallel data loading (Linux only, use 0 on Windows)
  report_to: "tensorboard"  # Enable TensorBoard logging
  early_stopping_patience: 5  # Stop if no improvement for 5 epochs
  load_best_model_at_end: true  # Load best checkpoint at end
  entity_boost: 5.0  # Weight multiplier for entity classes
  o_weight: 1.0  # Weight for O class
  # Image augmentation - disabled initially (can enable if needed)
  augment_images: false
  augment_prob: 0.3

data:
  dataset: "./data/dataset_pap_triage_with_negatives"

labels:
  module: "src.labels_pap_triage"
